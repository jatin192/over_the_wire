
1ï¸âƒ£  Make your terminal SMALL
    $   ssh -i bandit26@bandit.labs.overthewire.org  bandit26.sshkey -p 2220
                        ðŸ”½
ðŸ§¨  You are now inside --More-- (a pager)
                        ðŸ”½
2ï¸âƒ£  Press v to open the file in v1 editor
                        ðŸ”½
3ï¸âƒ£  Escape to a real shell
    :set shell=/bin/bash
    :shell
    Press Enter after each line
                        ðŸ”½
ðŸŽ‰  You now have a real shell as bandit26
    verfy: whoami
                        ðŸ”½
ðŸ  Get the password for the next level
    $   ./bandit27-do cat /etc/bandit_pass/bandit27
        upsNCc7vzaRDx6oZC6GiR6ERwe1MowGB

    Additionally ,you can also got
    $   cat /etc/bandit_pass/bandit26
        s0773xxkk0MXfdqOfPRVr9L3jJBUOgCZ
_______________________________________________________________________________________________________________

âž¡ï¸ Why TERMINAL SIZE matters
    -   A terminal is not just text but it has dimensions:  Rows (height) , Columns (width)
    -   Programs can ask the terminal: â€œHow many lines can you display?â€


âž¡ï¸ more is a pager. Its logic is roughly:
        if  (file_lines > terminal_rows) {   show one screen + pause for user input  }
        else                             {   show everything exit    }

        _______________________________________________________
        | Terminal size    |  Result                          |
        | _________________|__________________________________|
        | Big terminal     |  text fits â†’ `more` exits        |
        |__________________|__________________________________|
        | Small terminal   |  text doesnâ€™t fit â†’ `more` waits |
        |__________________|__________________________________|

        ðŸ”‘ Key insight
        -   User interaction exists only if more pauses
        -   No pause = no exploit.

âž¡ï¸  Why more is dangerous   =     because it is interactive and can execute other programs, 
                                  which makes it effectively a shell


âž¡ï¸  Inside more, keys have special meaning.
        v	=   key to open editor (â€œview in editorâ€)
        vi  =   the editor program


âž¡ï¸  Why vi is even more dangerous
    vi has a shell escape feature
    vi == An editor + A command runner + A shell launcher


vi uses a shell variable:   :   shell               (But sometimes the default shell is also restricted or fails)
                            :   set shell=/bin/bash (When I ask for a shell, use /bin/bash)

                            -   They are used to escape the fake/restricted login shell and 
                                obtain a real interactive /bin/bash shell as bandit26




ðŸ”‘ Terminal size is input to program logic.
ðŸ”‘ more â‰  safe Itâ€™s interactive â†’ dangerous.
ðŸ”‘ Editors are shells in disguise.
âŒ bash forbidden But âœ… vi allowed   = so it means =   âœ… bash allowed



*********************************************************************************************
Restricting a userâ€™s shell is meaningless if the allowed program is interactive,            * 
because any interactive process (like more or vi) can be escaped to a full shell.           *
*********************************************************************************************

restriction = policy
vi = capability
capability > policy
__________________________________________________________________________________________________________________

A user defines permissions, 
a terminal provides interaction, 
a shell interprets commands,
bash is one specific shell 
â€” confusing them leads to broken security.

____________________________________________________________________________________________________________________
